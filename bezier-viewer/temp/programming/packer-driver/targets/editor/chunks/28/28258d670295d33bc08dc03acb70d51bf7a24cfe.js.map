{"version":3,"sources":["file:///E:/personal/bezier-viewer/assets/scripts/Point.ts"],"names":["_decorator","Component","NodeEventType","v2","UITransform","v3","ccclass","property","Point","touchPos","touchPos_world","touchPos_node","paper","init","onLoad","addEvents","onDestroy","removeEvents","start","node","on","TOUCH_MOVE","onTouchMove","off","e","propagationStopped","touch","getUILocation","x","y","parent","getComponent","convertToNodeSpaceAR","setPosition"],"mappings":";;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAA4CC,MAAAA,a,OAAAA,a;AAAqBC,MAAAA,E,OAAAA,E;AAAIC,MAAAA,W,OAAAA,W;AAAmBC,MAAAA,E,OAAAA,E;;;;;;;;;OAEvG;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBP,U;;uBAGjBQ,K,WADZF,OAAO,CAAC,OAAD,C,gBAAR,MACaE,KADb,SAC2BP,SAD3B,CACqC;AAAA;AAAA;AAAA,eAGzBQ,QAHyB,GAGRN,EAAE,EAHM;AAAA,eAIzBO,cAJyB,GAIFL,EAAE,EAJA;AAAA,eAKzBM,aALyB,GAKHN,EAAE,EALC;AAAA,eAQzBO,KARyB,GAQV,IARU;AAAA;;AAUjCC,QAAAA,IAAI,CAACD,KAAD,EAAe;AACf,eAAKA,KAAL,GAAaA,KAAb;AACH;;AAEDE,QAAAA,MAAM,GAAG;AACL,eAAKC,SAAL;AACH;;AAEDC,QAAAA,SAAS,GAAG;AACR,eAAKC,YAAL;AACH;;AAEDC,QAAAA,KAAK,GAAG,CAEP;;AAEOH,QAAAA,SAAS,GAAG;AAChB,eAAKI,IAAL,CAAUC,EAAV,CAAalB,aAAa,CAACmB,UAA3B,EAAuC,KAAKC,WAA5C,EAAyD,IAAzD;AACH;;AAEOL,QAAAA,YAAY,GAAG;AACnB,eAAKE,IAAL,CAAUI,GAAV,CAAcrB,aAAa,CAACmB,UAA5B,EAAwC,KAAKC,WAA7C,EAA0D,IAA1D;AACH;;AAEOA,QAAAA,WAAW,CAACE,CAAD,EAAgB;AAC/BA,UAAAA,CAAC,CAACC,kBAAF,GAAuB,IAAvB;AACAD,UAAAA,CAAC,CAACE,KAAF,CAAQC,aAAR,CAAsB,KAAKlB,QAA3B;AACA,eAAKC,cAAL,CAAoBkB,CAApB,GAAwB,KAAKnB,QAAL,CAAcmB,CAAtC;AACA,eAAKlB,cAAL,CAAoBmB,CAApB,GAAwB,KAAKpB,QAAL,CAAcoB,CAAtC;AACA,eAAKV,IAAL,CAAUW,MAAV,CAAiBC,YAAjB,CAA8B3B,WAA9B,EAA2C4B,oBAA3C,CAAgE,KAAKtB,cAArE,EAAqF,KAAKC,aAA1F;AACA,eAAKQ,IAAL,CAAUc,WAAV,CAAsB,KAAKtB,aAAL,CAAmBiB,CAAzC,EAA4C,KAAKjB,aAAL,CAAmBkB,CAA/D,EAN+B,CAO/B;AACH;;AA1CgC,O","sourcesContent":["import { _decorator, Component, Node, Button, Touch, EventTouch, NodeEventType, Vec2, v2, UITransform, Vec3, v3 } from 'cc';\nimport { Paper } from './Paper';\nconst { ccclass, property } = _decorator;\n\n@ccclass('Point')\nexport class Point extends Component {\n\n    /**触摸点的位置 */\n    private touchPos: Vec2 = v2();\n    private touchPos_world: Vec3 = v3();\n    private touchPos_node: Vec3 = v3();\n\n    /**保存对画布的引用 */\n    private paper: Paper = null;\n\n    init(paper: Paper) {\n        this.paper = paper;\n    }\n\n    onLoad() {\n        this.addEvents();\n    }\n\n    onDestroy() {\n        this.removeEvents();\n    }\n\n    start() {\n\n    }\n\n    private addEvents() {\n        this.node.on(NodeEventType.TOUCH_MOVE, this.onTouchMove, this);\n    }\n\n    private removeEvents() {\n        this.node.off(NodeEventType.TOUCH_MOVE, this.onTouchMove, this);\n    }\n\n    private onTouchMove(e: EventTouch) {\n        e.propagationStopped = true;\n        e.touch.getUILocation(this.touchPos);\n        this.touchPos_world.x = this.touchPos.x;\n        this.touchPos_world.y = this.touchPos.y;\n        this.node.parent.getComponent(UITransform).convertToNodeSpaceAR(this.touchPos_world, this.touchPos_node);\n        this.node.setPosition(this.touchPos_node.x, this.touchPos_node.y);\n        // this.paper.draw();\n    }\n\n\n}\n\n"]}