{"version":3,"sources":["file:///E:/personal/bezier-viewer/project/assets/scripts/Pool.ts"],"names":["ccclass","property","cc","_decorator","Pool","constructor","pre","prefab","nodePool","NodePool","getNode","node","size","get","instantiate","putNode","test","name","put","console","warn","clear"],"mappings":";;;;;;;;;;;;;;OAEM;AAAEA,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBC,EAAE,CAACC,U;;yBAGZC,I,GADpBJ,O,UAAD,MACqBI,IADrB,CAC0B;AAEtBC,QAAAA,WAAW,CAACC,GAAD,EAAiB;AAAA,eAIpBC,MAJoB,GAIA,IAJA;AAAA,eAKpBC,QALoB,GAKI,IAAIN,EAAE,CAACO,QAAP,EALJ;AACxB,eAAKF,MAAL,GAAcD,GAAd;AACH;;AAKD;AACOI,QAAAA,OAAO,GAAY;AACtB,cAAIC,IAAa,GAAG,IAApB;;AACA,cAAI,KAAKH,QAAL,CAAcI,IAAd,KAAuB,CAA3B,EAA8B;AAC1BD,YAAAA,IAAI,GAAG,KAAKH,QAAL,CAAcK,GAAd,EAAP;AACH,WAFD,MAEO;AACHF,YAAAA,IAAI,GAAGT,EAAE,CAACY,WAAH,CAAe,KAAKP,MAApB,CAAP;AACH;;AACD,iBAAOI,IAAP;AACH;AAED;;;AACOI,QAAAA,OAAO,CAACJ,IAAD,EAAgB;AAC1B,cAAIK,IAAa,GAAG,KAAKN,OAAL,EAApB;AACA,cAAIC,IAAI,CAACM,IAAL,KAAcD,IAAI,CAACC,IAAvB,EAA6B,KAAKT,QAAL,CAAcU,GAAd,CAAkBP,IAAlB,EAA7B,KACKQ,OAAO,CAACC,IAAR,CAAc,cAAd,EAA6BT,IAA7B,EAAmC,KAAKH,QAAxC;AACR;AAED;;;AACOa,QAAAA,KAAK,GAAG;AACX,eAAKb,QAAL,IAAiB,KAAKA,QAAL,CAAca,KAAd,EAAjB;AACH;;AA9BqB,O","sourcesContent":["\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class Pool {\r\n\r\n    constructor(pre: cc.Prefab) {\r\n        this.prefab = pre;\r\n    }\r\n\r\n    private prefab: cc.Prefab = null;\r\n    private nodePool: cc.NodePool = new cc.NodePool();\r\n\r\n    /** 获取节点 */\r\n    public getNode(): cc.Node {\r\n        let node: cc.Node = null;\r\n        if (this.nodePool.size() > 0) {\r\n            node = this.nodePool.get();\r\n        } else {\r\n            node = cc.instantiate(this.prefab);\r\n        }\r\n        return node;\r\n    }\r\n\r\n    /** 放回节点 */\r\n    public putNode(node: cc.Node) {\r\n        let test: cc.Node = this.getNode();\r\n        if (node.name === test.name) this.nodePool.put(node);\r\n        else console.warn(`节点放回到错误的节点池：`, node, this.nodePool);\r\n    }\r\n\r\n    /**清空节点池 */\r\n    public clear() {\r\n        this.nodePool && this.nodePool.clear();\r\n    }\r\n}\r\n"]}