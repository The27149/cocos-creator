{"version":3,"sources":["assets\\customComponents\\shop\\script\\ShopData.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import LocalData from \"../../../script/common/LocalData\";\r\n\r\n\r\nconst { ccclass, property } = cc._decorator;\r\nexport interface IPropItem {\r\n    type: number;\r\n    cost: number;\r\n    isLock: boolean;\r\n    isPick: boolean;\r\n}\r\n\r\n@ccclass\r\nexport default class ShopData {\r\n    private constructor() { }\r\n    private static _ins: ShopData = null;\r\n    public static get ins(): ShopData {\r\n        if (!this._ins) {\r\n            this._ins = new ShopData();\r\n            this._ins.init();\r\n        }\r\n        return this._ins;\r\n    }\r\n\r\n    /**本地永久存储副本 */\r\n    private localShopData: LocalData = null;\r\n    /**道具列表 */\r\n    private props: IPropItem[] = null;\r\n    private key: string = `props`;\r\n\r\n    private init() {\r\n        this.localShopData = new LocalData(`9011301_shop`);\r\n        this.props = this.localShopData.getData(this.key);\r\n        if (!this.props) {\r\n            this.props = [];\r\n            let config = this.getPropConfig();\r\n            for (let item of config.props) {\r\n                let prop: IPropItem = { type: 0, cost: 0, isLock: false, isPick: false };\r\n                Object.assign(prop, item);\r\n                let isLock = item.cost !== 0;\r\n                prop.isLock = isLock;\r\n                prop.isPick = !isLock;\r\n                this.props.push(prop);\r\n            }\r\n            this.save();\r\n        }\r\n    }\r\n\r\n    private save() {\r\n        this.localShopData.setData(this.key, this.props);\r\n    }\r\n\r\n    getAllProps() {\r\n        return this.props;\r\n    }\r\n\r\n    getData(type: number): IPropItem {\r\n        return this.props.find(prop => prop.type === type);\r\n    }\r\n\r\n    setLock(type: number, state: boolean) {\r\n        let data = this.getData(type);\r\n        data.isLock = state;\r\n        this.save();\r\n    }\r\n\r\n    setPick(type: number, state: boolean) {\r\n        let data = this.getData(type);\r\n        data.isPick = state;\r\n        this.save();\r\n    }\r\n\r\n\r\n    /**自己的商店配置 */\r\n    private getPropConfig(): any {\r\n        return {\r\n            props: [\r\n                {\r\n                    type: 1,    //球1\r\n                    cost: 0,\r\n                },\r\n                {\r\n                    type: 2,     //球2\r\n                    cost: 20,\r\n                },\r\n                {\r\n                    type: 3,\r\n                    cost: 40,\r\n                },\r\n                {\r\n                    type: 4,\r\n                    cost: 60,\r\n                },\r\n                {\r\n                    type: 5,\r\n                    cost: 80,\r\n                },\r\n\r\n            ]\r\n        }\r\n    }\r\n\r\n}\r\n"]}