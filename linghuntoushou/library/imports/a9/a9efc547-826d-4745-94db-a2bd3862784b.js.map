{"version":3,"sources":["assets\\customComponents\\shop\\script\\Shop.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA,qDAAgD;AAEhD,wDAAmD;AACnD,kEAAiE;AACjE,uCAAkC;AAClC,uCAAkC;AAG5B,IAAA,KAAwB,EAAE,CAAC,UAAU,EAAnC,OAAO,aAAA,EAAE,QAAQ,cAAkB,CAAC;AAG5C;IAAkC,wBAAM;IAAxC;QAAA,qEA+CC;QA7CG,iBAAW,GAAc,IAAI,CAAC;QAG9B,uBAAiB,GAAY,IAAI,CAAC;QAGlC,cAAQ,GAAc,IAAI,CAAC;QAEnB,iBAAW,GAAgB,IAAI,CAAC;QAChC,kBAAY,GAAe,EAAE,CAAC;;IAoC1C,CAAC;IAlCa,qBAAM,GAAhB;QACI,IAAI,CAAC,WAAW,GAAG,IAAI,yBAAW,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;QAC5D,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAE,CAAC,OAAO,EAAE,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC;IACvD,CAAC;IAEO,sBAAO,GAAf;QACI,gBAAM,CAAC,GAAG,CAAC,kBAAQ,CAAC,CAAC,YAAY,EAAE,CAAC;QACpC,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC;IACxB,CAAC;IAES,uBAAQ,GAAlB;QACI,IAAI,CAAC,MAAM,EAAE,CAAC;IAClB,CAAC;IAEO,qBAAM,GAAd;QACI,IAAI,CAAC,iBAAiB,CAAC,iBAAiB,EAAE,CAAC;QAC3C,IAAI,IAAI,GAAG,kBAAQ,CAAC,GAAG,CAAC,WAAW,EAAE,CAAC;QACtC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YAClC,IAAI,IAAI,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC;YACnB,IAAI,IAAI,GAAG,IAAI,CAAC,WAAW,CAAC,GAAG,EAAE,CAAC;YAClC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,iBAAiB,CAAC;YACrC,IAAI,IAAI,GAAG,IAAI,CAAC,YAAY,CAAC,kBAAQ,CAAC,CAAC;YACvC,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;YACtB,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;SAChC;IAEL,CAAC;IAEM,wBAAS,GAAhB;QACI,KAAiB,UAAiB,EAAjB,KAAA,IAAI,CAAC,YAAY,EAAjB,cAAiB,EAAjB,IAAiB,EAAE;YAA/B,IAAI,IAAI,SAAA;YACT,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;SACvB;IACL,CAAC;IA3CD;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;6CACU;IAG9B;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;mDACgB;IAGlC;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;0CACO;IARV,IAAI;QADxB,OAAO;OACa,IAAI,CA+CxB;IAAD,WAAC;CA/CD,AA+CC,CA/CiC,gBAAM,GA+CvC;kBA/CoB,IAAI","file":"","sourceRoot":"/","sourcesContent":["import SoundMgr from \"../../../script/SoundMgr\";\r\nimport { Global } from \"../../../script/common/Global\";\r\nimport Module from \"../../../script/common/Module\";\r\nimport { NodeFactory } from \"../../../script/common/NodeFactory\";\r\nimport ShopData from \"./ShopData\";\r\nimport ShopItem from \"./ShopItem\";\r\n\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class Shop extends Module {\r\n    @property(cc.Prefab)\r\n    shopItemPre: cc.Prefab = null;\r\n\r\n    @property(cc.Node)\r\n    shopItemContainer: cc.Node = null;\r\n\r\n    @property(cc.Button)\r\n    closeBtn: cc.Button = null;\r\n\r\n    private itemFactory: NodeFactory = null;\r\n    private shopItemList: ShopItem[] = [];\r\n\r\n    protected onLoad(): void {\r\n        this.itemFactory = new NodeFactory().init(this.shopItemPre);\r\n        this.closeBtn.node.on(`click`, this.onClose, this);\r\n    }\r\n\r\n    private onClose() {\r\n        Module.get(SoundMgr).playBtnSound();\r\n        this.node.destroy();\r\n    }\r\n\r\n    protected onEnable(): void {\r\n        this.initUI();\r\n    }\r\n\r\n    private initUI() {\r\n        this.shopItemContainer.removeAllChildren();\r\n        let list = ShopData.ins.getAllProps();\r\n        for (let i = 0; i < list.length; i++) {\r\n            let data = list[i];\r\n            let node = this.itemFactory.get();\r\n            node.parent = this.shopItemContainer;\r\n            let item = node.getComponent(ShopItem);\r\n            item.init(data, this);\r\n            this.shopItemList.push(item);\r\n        }\r\n\r\n    }\r\n\r\n    public unPickAll() {\r\n        for (let item of this.shopItemList) {\r\n            item.setPick(false);\r\n        }\r\n    }\r\n\r\n}\r\n"]}