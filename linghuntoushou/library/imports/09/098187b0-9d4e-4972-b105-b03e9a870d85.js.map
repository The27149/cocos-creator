{"version":3,"sources":["assets\\script\\SoundMgr.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA,0CAA4C;AAC5C,0CAAqC;AAG/B,IAAA,KAAwB,EAAE,CAAC,UAAU,EAAnC,OAAO,aAAA,EAAE,QAAQ,cAAkB,CAAC;AAM5C;IAAsC,4BAAM;IAA5C;QAAA,qEAgDC;QA9CG,iBAAW,GAAmB,IAAI,CAAC;QAGnC,cAAQ,GAAc,IAAI,CAAC;QAG3B,cAAQ,GAAY,IAAI,CAAC;QAGzB,iBAAW,GAAY,IAAI,CAAC;QAE5B,YAAY;QACJ,WAAK,GAA8B,IAAI,GAAG,EAAE,CAAC;;IAkCzD,CAAC;IAhCa,yBAAM,GAAhB;QACI,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAE,CAAC,OAAO,EAAE,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,CAAC;IAC3D,CAAC;IAEO,8BAAW,GAAnB;QACI,IAAI,CAAC,YAAY,EAAE,CAAC;QACpB,IAAI,MAAM,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,GAAG,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC;QAC5D,IAAI,IAAI,CAAC,QAAQ;YAAE,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,MAAM,CAAC;QACjD,IAAI,IAAI,CAAC,WAAW;YAAE,IAAI,CAAC,WAAW,CAAC,MAAM,GAAG,CAAC,MAAM,CAAC;IAC5D,CAAC;IAED;;;OAGG;IACI,6BAAU,GAAjB,UAAkB,IAAY;QAA9B,iBAWC;QAVG,IAAI,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;QAChC,IAAI,IAAI;YAAE,EAAE,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,EAAE,KAAK,EAAE,GAAG,CAAC,CAAC;aAC3C;YACD,EAAE,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,EAAE,EAAE,CAAC,SAAS,EAAE,UAAC,KAAK,EAAE,IAAkB;gBAC5D,IAAI,CAAC,KAAK,EAAE;oBACR,KAAI,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;oBAC3B,EAAE,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,EAAE,KAAK,EAAE,GAAG,CAAC,CAAC;iBACzC;YACL,CAAC,CAAC,CAAC;SACN;IACL,CAAC;IAEM,+BAAY,GAAnB;QACI,IAAI,CAAC,UAAU,CAAC,kBAAS,CAAC,MAAM,CAAC,CAAC;IACtC,CAAC;IA5CD;QADC,QAAQ,CAAC,EAAE,CAAC,WAAW,CAAC;iDACU;IAGnC;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;8CACO;IAG3B;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;8CACO;IAGzB;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;iDACU;IAXX,QAAQ;QAD5B,OAAO;OACa,QAAQ,CAgD5B;IAAD,eAAC;CAhDD,AAgDC,CAhDqC,gBAAM,GAgD3C;kBAhDoB,QAAQ","file":"","sourceRoot":"/","sourcesContent":["import { SoundPath } from \"./common/Global\";\r\nimport Module from \"./common/Module\";\r\n\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n\r\n\r\n\r\n@ccclass\r\nexport default class SoundMgr extends Module {\r\n    @property(cc.AudioSource)\r\n    audioSource: cc.AudioSource = null;\r\n\r\n    @property(cc.Button)\r\n    soundBtn: cc.Button = null;\r\n\r\n    @property(cc.Node)\r\n    muteNode: cc.Node = null;\r\n\r\n    @property(cc.Node)\r\n    notMuteNode: cc.Node = null;\r\n\r\n    /**缓存声音资源 */\r\n    private clips: Map<string, cc.AudioClip> = new Map();\r\n\r\n    protected onLoad(): void {\r\n        this.soundBtn.node.on('click', this.switchSound, this);\r\n    }\r\n\r\n    private switchSound() {\r\n        this.playBtnSound();\r\n        let isMute = this.audioSource.mute = !this.audioSource.mute;\r\n        if (this.muteNode) this.muteNode.active = isMute;\r\n        if (this.notMuteNode) this.notMuteNode.active = !isMute;\r\n    }\r\n\r\n    /**\r\n     * 播放音效文件\r\n     * @param path 音效路径，相对于resources\r\n     */\r\n    public playEffect(path: string): void {\r\n        let clip = this.clips.get(path);\r\n        if (clip) cc.audioEngine.play(clip, false, 0.5);\r\n        else {\r\n            cc.resources.load(path, cc.AudioClip, (error, clip: cc.AudioClip) => {\r\n                if (!error) {\r\n                    this.clips.set(path, clip);\r\n                    cc.audioEngine.play(clip, false, 0.5);\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    public playBtnSound() {\r\n        this.playEffect(SoundPath.button);\r\n    }\r\n\r\n}\r\n"]}