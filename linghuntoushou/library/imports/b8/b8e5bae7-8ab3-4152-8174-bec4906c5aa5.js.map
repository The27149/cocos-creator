{"version":3,"sources":["assets\\script\\Launch.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["\r\nimport CoinMgr from \"./CoinMgr\";\r\nimport Game from \"./Game\";\r\nimport SoundMgr from \"./SoundMgr\";\r\nimport EventMgr from \"./common/EventMgr\";\r\nimport { GConst, GEvent } from \"./common/Global\";\r\nimport Module from \"./common/Module\";\r\n\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class Launch extends Module {\r\n\r\n    @property(cc.Button)\r\n    startBtn: cc.Button = null;\r\n\r\n    @property(cc.Label)\r\n    starLabel: cc.Label = null;\r\n\r\n    @property(cc.Button)\r\n    shopBtn: cc.Button = null;\r\n\r\n    private canStart: boolean = true;\r\n\r\n    protected onLoad(): void {\r\n        this.startBtn.node.on('click', this.onClickStartBtn, this);\r\n        this.shopBtn.node.on(`click`, this.onOpenShop, this);\r\n        EventMgr.ins.on(GEvent.coinChanged, this.onCoinChanged, this);\r\n        this.updateStar(CoinMgr.ins.getCoin());\r\n    }\r\n\r\n    protected onDestroy(): void {\r\n        EventMgr.ins.off(GEvent.coinChanged, this.onCoinChanged, this);\r\n    }\r\n\r\n    private onClickStartBtn() {\r\n        Module.get(SoundMgr).playBtnSound();\r\n        if (!this.canStart) return;\r\n        this.hide();\r\n        Module.get(Game).show();\r\n    }\r\n\r\n    private onOpenShop() {\r\n        Module.get(SoundMgr).playBtnSound();\r\n        this.addShopView();\r\n    }\r\n\r\n    public hide() {\r\n        this.canStart = false;\r\n        this.node.runAction(cc.fadeOut(1));\r\n        setTimeout(() => {\r\n            this.node.active = false;\r\n        }, 1000);\r\n    }\r\n\r\n    public show() {\r\n        this.node.active = true;\r\n        this.node.runAction(cc.fadeIn(1));\r\n        setTimeout(() => {\r\n            this.canStart = true;\r\n        }, 1000);\r\n    }\r\n\r\n    private updateStar(num: number) {\r\n        this.starLabel.string = num.toString();\r\n    }\r\n\r\n    private onCoinChanged() {\r\n        let num = CoinMgr.ins.getCoin();\r\n        this.updateStar(num);\r\n    }\r\n\r\n    private addShopView() {\r\n        let bundle = cc.assetManager.getBundle(GConst.customCompBundle);\r\n        bundle.load(`shop/prefab/Shop`, cc.Prefab, (err, pre: cc.Prefab) => {\r\n            if (!err) {\r\n                let node = cc.instantiate(pre);\r\n                node.parent = this.node;\r\n            }\r\n        })\r\n    }\r\n}\r\n"]}